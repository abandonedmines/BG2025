
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<title>2025년 부국광산 현장정보 공유시스템</title>
<style>
  .remediation-label {
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid #888;
    border-radius: 4px;
    padding: 2px 6px;
    font-size: 13px;
    font-weight: bold;
    color: #5A00B2;
    box-shadow: 1px 1px 3px rgba(0,0,0,0.2);
    white-space: nowrap;
  }
</style>
</head>
<body>
<!-- 생략된 본문 -->

<script>
// drawGeoJSON 내부의 remediation 조건부를 수정한 코드 예시
function drawGeoJSON(geojson, type) {
  const objs = [];
  geojson.features.forEach(f => {
    const { type: gtype, coordinates } = f.geometry;
    const props = f.properties || {};

    if (gtype === 'Polygon' || gtype === 'MultiPolygon') {
      const polys = gtype === 'Polygon' ? [coordinates] : coordinates;
      polys.forEach(polygon => {
        polygon.forEach(ring => {
          const path = ring.map(([lng, lat]) => new kakao.maps.LatLng(lat, lng));
          const style = getPolygonStyle(type);
          const poly = new kakao.maps.Polygon({
            path,
            strokeWeight: style.strokeWeight,
            strokeColor: style.strokeColor,
            strokeStyle: style.strokeStyle,
            fillColor: style.fillColor,
            fillOpacity: style.fillOpacity
          });
          poly.setMap(map);
          objs.push(poly);

          // 라벨 표시 조건 수정: props.adress로 변경
          if (type === 'remediation' && props.adress) {
            const bounds = poly.getBounds();
            const center = bounds.getCenter();
            const labelOverlay = new kakao.maps.CustomOverlay({
              position: center,
              content: `<div class="remediation-label">${props.adress}</div>`,
              yAnchor: 0.5
            });
            labelOverlay.setMap(map);
            poly._labelOverlay = labelOverlay;
          }
        });
      });
    }

    // ... 생략된 나머지 처리
  });
  return objs;
}
</script>
</body>
</html>
